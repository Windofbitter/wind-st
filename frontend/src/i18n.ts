import i18n from "i18next";
import { initReactI18next } from "react-i18next";

export const LANGUAGE_STORAGE_KEY = "wind-st-language";

export type SupportedLanguage = "en" | "zh";

function detectInitialLanguage(): SupportedLanguage {
  if (typeof window === "undefined") return "en";
  const stored = window.localStorage.getItem(LANGUAGE_STORAGE_KEY);
  if (stored === "zh" || stored === "en") return stored;
  const browser = window.navigator.language.toLowerCase();
  if (browser.startsWith("zh")) return "zh";
  return "en";
}

const resources = {
  en: {
    translation: {
      nav: {
        chat: "Chat",
        characters: "Characters",
        userPersonas: "User Personas",
        presets: "Presets",
        lorebooks: "Lorebooks",
        llmConnections: "LLM Connections",
        mcpServers: "MCP Servers",
        runs: "Runs",
        settings: "Settings",
        health: "Health",
      },
      settings: {
        title: "Settings",
        themeLabel: "Theme (UI only)",
        themeDark: "Dark",
        themeLight: "Light (experimental)",
        themeHint:
          "Theme is stored in local storage only. The current CSS is optimized for dark mode.",
        languageLabel: "Language",
        languageHint:
          "Language preference is stored in local storage and applies to the UI only.",
        languageEnglish: "English",
        languageChinese: "Chinese (Simplified)",
      },
      chat: {
        characterLabel: "Character",
        characterPlaceholder: "Select character",
        userPersonaLabel: "User persona",
        userPersonaPlaceholder: "Select persona",
        userPersonaDefaultTag: "default",
        chatsTitle: "Chats",
        chatsNew: "New",
        chatsLoading: "Loading chats…",
        noCharacterSelected: "No character selected",
        messagesLoading: "Loading messages…",
        composerPlaceholderActive: "Type a message…",
        composerPlaceholderInactive:
          "Select a chat to start messaging",
        sendButton: "Send",
        sendButtonSending: "Sending…",
        llmConfigTitle: "LLM Config",
        llmConnectionLabel: "Connection",
        llmConnectionPlaceholder: "Select connection",
        connectionDisabledError: "Selected connection is disabled. Choose another.",
        noEnabledConnections: "No enabled connections available.",
        modelLabel: "Model",
        fetchModelsButton: "Fetch models",
        fetchModelsLoading: "Fetching models…",
        fetchModelsHint: "Select a suggested model or keep typing to use a custom one.",
        temperatureLabel: "Temperature",
        maxTokensLabel: "Max output tokens",
        maxToolIterationsLabel: "Max tool iterations",
        toolCallTimeoutLabel: "Tool call timeout (ms)",
        saveConfigButton: "Save Config",
        saveConfigButtonSaving: "Saving…",
        historyEnabledLabel: "Include conversation history",
        historyEnabledOptionOn: "Include history",
        historyEnabledOptionOff: "No history",
        historyMessageLimitLabel: "History messages to keep",
        loreScanTokenLimitLabel: "Lore scan token limit",
        loreScanTokenLimitHint:
          "Budget of recent chat tokens to scan for lore keywords.",
        promptStackTitle: "Prompt Stack Preview",
        promptStackSelectCharacter:
          "Select a character to see prompt stack.",
        promptStackLoading: "Loading prompt stack…",
        personaTitle: "Persona",
        personaEmpty: "No persona defined.",
        stackTitle: "Stack",
        stackEmpty:
          "No prompt presets attached. Edit via Characters → Prompt Builder.",
        createChatPromptTitle: "Chat title",
        createChatPromptDefault: "New Chat",
        deleteChatConfirm:
          "Delete this chat? This cannot be undone.",
        renameChatTitle: "Rename chat",
        renameChatDescription: "Update the title for \"{{name}}\".",
        renameChatLabel: "Chat title",
        renameChatButton: "Rename chat",
        deleteChatButton: "Delete chat",
        renameValidation: "Title is required.",
        selectChatToConfigure: "Select a chat to configure.",
        promptPreviewTitle: "Prompt Preview",
        promptPreviewLoading: "Loading prompt preview…",
        promptPreviewNoChat: "Select a chat to see prompt preview.",
        promptPreviewMessagesLabel: "Messages",
        promptPreviewNoMessages: "<no prompt messages>",
        promptPreviewToolsLabel: "Tools",
        promptPreviewNoTools: "<no tools attached>",
      },
      userPersonas: {
        title: "User Personas",
        newTitle: "New persona",
        nameLabel: "Name",
        descriptionLabel: "Description",
        promptLabel: "Prompt (optional)",
        isDefaultLabel: "Default persona",
        createButton: "Create",
        createButtonCreating: "Creating…",
        listTitle: "Personas",
        listEmpty: "No personas yet.",
        listActions: "Actions",
        deleteButton: "Delete",
        deleteConfirm: "Delete this persona? Chats using it will fail to load.",
        setDefaultButton: "Make default",
        defaultTag: "Default",
      },
      common: {
        errorPrefix: "Error:",
        errorLoadingConnections: "Error loading connections:",
        loadingConfig: "Loading config…",
        testing: "Testing…",
        save: "Save",
        saving: "Saving…",
        cancel: "Cancel",
      },
      characters: {
        listNewTitle: "New Character",
        listNameLabel: "Name",
        listDescriptionLabel: "Description",
        listAvatarPathLabel: "Avatar path",
        listPersonaLabel: "Persona",
        listCreatorNotesLabel: "Creator notes",
        listCreateButtonCreating: "Creating…",
        listCreateButton: "Create Character",
        listTitle: "Characters",
        listLoading: "Loading characters…",
        listTableActions: "Actions",
        listEmpty: "No characters yet. Create one above.",
        listEditButton: "Edit",
        listDeleteButton: "Delete",
        listDeleteConfirm:
          "Delete this character? This cannot be undone.",
        detailMissingId: "Character ID is missing.",
        detailTabsOverview: "Overview",
        detailTabsPersona: "Persona",
        detailTabsPromptBuilder: "Prompt Builder",
        detailLoading: "Loading character…",
        detailOverviewTitle: "Overview",
        detailOverviewSaveButtonSaving: "Saving…",
        detailOverviewSaveButton: "Save",
        detailPersonaTitle: "Persona",
        detailPersonaLabel: "Persona",
        detailPersonaSaveButtonSaving: "Saving…",
        detailPersonaSaveButton: "Save Persona",
      },
      lorebooks: {
        listNewTitle: "New Lorebook",
        listNameLabel: "Name",
        listDescriptionLabel: "Description",
        listScopeLabel: "Scope",
        listScopeLocal: "Local",
        listScopeGlobal: "Global",
        listScopeHint:
          "Global is an organizational tag for filtering; it does not change behavior.",
        listCreateButtonCreating: "Creating…",
        listCreateButton: "Create Lorebook",
        listTitle: "Lorebooks",
        listFilterAll: "All",
        listFilterGlobal: "Global",
        listFilterLocal: "Local",
        listFilterSearchLabel: "Search lorebooks",
        listFilterSearchPlaceholder: "Search by name…",
        listLoading: "Loading lorebooks…",
        listTableName: "Name",
        listTableDescription: "Description",
        listTableGlobal: "Global",
        listTableActions: "Actions",
        listYes: "Yes",
        listNo: "No",
        listOpenButton: "Open",
        listDeleteButton: "Delete",
        listEmpty: "No lorebooks yet. Create one above.",
        listDeleteConfirm: "Delete this lorebook and all entries?",
        detailMissingId: "Lorebook ID is missing.",
        detailTitle: "Lorebook",
        detailLoadingLorebook: "Loading lorebook…",
        detailNameLabel: "Name",
        detailDescriptionLabel: "Description",
        detailScopeLabel: "Scope",
        detailScopeLocal: "Local",
        detailScopeGlobal: "Global",
        detailScopeHint:
          "Global is an organizational tag for filtering; it does not change behavior.",
        detailSaveButtonSaving: "Saving…",
        detailSaveButton: "Save Lorebook",
        newEntryTitle: "New Entry",
        newEntryKeywordsLabel: "Keywords (comma-separated)",
        newEntryKeywordsPlaceholder:
          "e.g., spaceship, warp core, starship",
        newEntryKeywordsHint:
          "Matching triggers when any keyword is found.",
        newEntryContentLabel: "Content",
        newEntryActiveLabel: "Active",
        newEntryActiveHint: "Only active entries are used.",
        newEntryCreateButtonCreating: "Creating…",
        newEntryCreateButton: "Add Entry",
        entriesTitle: "Entries",
        entriesLoading: "Loading entries…",
        entriesTableKeywords: "Keywords",
        entriesTableContent: "Content",
        entriesTableOrder: "Order",
        entriesTableActive: "Active",
        entriesTableActions: "Actions",
        entriesMoveUpTitle: "Move up",
        entriesMoveDownTitle: "Move down",
        entriesEmpty: "No entries yet. Add one above.",
        entriesEditButton: "Edit",
        entriesDeleteButton: "Delete",
        editEntryTitle: "Edit entry",
        editEntryKeywordsLabel: "Keywords (comma-separated)",
        editEntryContentLabel: "Content",
        editEntryEnabledLabel: "Enabled",
        editEntrySaveButtonSaving: "Saving…",
        editEntrySaveButton: "Save Entry",
        editEntryCancelButton: "Cancel",
        entriesDeleteConfirm: "Delete this entry?",
      },
      presets: {
        filtersTitle: "Filters",
        filtersKindLabel: "Kind",
        filtersKindAll: "All",
        filtersKindStaticText: "Static text",
        filtersKindLorebook: "Lorebook",
        filtersKindHistory: "History",
        filtersKindMcpTools: "MCP tools",
        filtersBuiltInLabel: "Built-in",
        filtersBuiltInAll: "All",
        filtersBuiltInTrue: "Only built-in",
        filtersBuiltInFalse: "Only user-defined",
        filtersTitleContainsLabel: "Title contains",
        newTitle: "New Preset",
        newFormTitleLabel: "Title",
        newFormKindLabel: "Kind",
        newFormDescriptionLabel: "Description",
        newFormContentLabel: "Content",
        newCreateButtonCreating: "Creating…",
        newCreateButton: "Create Preset",
        listTitle: "Presets",
        listLoading: "Loading presets…",
        listTableTitle: "Title",
        listTableKind: "Kind",
        listTableDescription: "Description",
        listTableBuiltIn: "Built-in",
        listTableActions: "Actions",
        listBuiltInYes: "Yes",
        listBuiltInNo: "No",
        listEditButton: "Edit",
        listDeleteButton: "Delete",
        listEmpty: "No presets match filters.",
        editTitle: "Edit preset",
        editFormTitleLabel: "Title",
        editFormDescriptionLabel: "Description",
        editFormContentLabel: "Content",
        editSaveButtonSaving: "Saving…",
        editSaveButton: "Save Changes",
        editCancelButton: "Cancel",
        deleteConfirm:
          "Delete this preset? It may be referenced by prompt stacks.",
      },
      promptBuilder: {
        quickPersonaTitle: "Quick Persona Editor",
        quickPersonaLabel: "Persona",
        quickPersonaSaveButtonSaving: "Saving…",
        quickPersonaSaveButton: "Save Persona",
        paletteTitle: "Preset Palette",
        paletteLoading: "Loading presets…",
        paletteEmpty:
          "No presets defined yet. Create them on the Presets page.",
        paletteAddBadge: "Add",
        paletteSectionStaticBlocks: "Static Blocks",
        paletteSectionLorebooks: "Lorebooks",
        paletteSectionHistory: "History",
        paletteSectionMcpTools: "MCP Tool Sets",
        kindLabelStaticText: "Static text",
        kindLabelLorebook: "Lorebook",
        kindLabelHistory: "History",
        kindLabelMcpTools: "MCP tools",
        stackTitle: "Current Stack",
        stackRoleFilterAll: "All roles",
        stackRoleFilterSystem: "System",
        stackRoleFilterAssistant: "Assistant",
        stackRoleFilterUser: "User",
        stackAttachRoleLabel: "Attach as",
        stackReordering: "Reordering…",
        stackLoading: "Loading stack…",
        stackEmpty:
          "No presets in stack yet. Click a preset on the left to attach it.",
        stackRemoveButton: "Remove",
        previewTitle: "Prompt Preview",
        previewSystemPersonaLabel: "System / Persona:",
        previewStackLabel: "Stack:",
        previewEmptyPersona: "<empty persona>",
        previewNoPresets: "<no presets attached>",
        lorebooksAttachedTitle: "Attached Lorebooks",
        lorebooksAttachedEmpty: "No lorebooks attached yet.",
        mcpAttachedTitle: "Attached MCP Servers",
        mcpAttachedEmpty: "No MCP servers attached yet.",
      },
      llmConnections: {
        newTitle: "New Connection",
        newNameLabel: "Name",
        newBaseUrlLabel: "Base URL",
        newDefaultModelLabel: "Default model",
        newApiKeyLabel: "API key",
        newEnabledLabel: "Enabled",
        newCreateButtonCreating: "Creating…",
        newCreateButton: "Create Connection",
        listTitle: "Connections",
        listLoading: "Loading connections…",
        listTableName: "Name",
        listTableProvider: "Provider",
        listTableBaseUrl: "Base URL",
        listTableDefaultModel: "Default model",
        listTableEnabled: "Enabled",
        listTableStatus: "Status",
        listTableActions: "Actions",
        listYes: "Yes",
        listNo: "No",
        testButton: "Test",
        testDraftButton: "Test draft",
        statusUnknown: "Unknown",
        statusOk: "OK",
        statusFailing: "Failing",
        statusError: "Error",
        statusLastTested: "Last tested: {{timestamp}}",
        statusNotTested: "Not tested yet",
        testResultOk: "Connection OK. Models available: {{count}}",
        testResultFail: "Connection failed: {{message}}",
        listEditButton: "Edit",
        listDeleteButton: "Delete",
        listEmpty: "No LLM connections configured.",
        editTitle: "Edit connection",
        editNameLabel: "Name",
        editBaseUrlLabel: "Base URL",
        editDefaultModelLabel: "Default model",
        editEnabledLabel: "Enabled",
        editSaveButtonSaving: "Saving…",
        editSaveButton: "Save Changes",
        editCancelButton: "Cancel",
        deleteConfirm:
          "Delete this LLM connection? Chats using it may fail.",
      },
      mcpServers: {
        newTitle: "New MCP Server",
        newNameLabel: "Name",
        newCommandLabel: "Command",
        newArgsLabel: "Args (one per line)",
        newEnvLabel: "Env (KEY=VALUE, comma-separated)",
        newEnabledLabel: "Enabled",
        newCreateButtonCreating: "Creating…",
        newCreateButton: "Create MCP Server",
        listTitle: "MCP Servers",
        listLoading: "Loading MCP servers…",
        listTableName: "Name",
        listTableCommand: "Command",
        listTableArgs: "Args",
        listTableStatus: "Status",
        listTableEnabled: "Enabled",
        listTableActions: "Actions",
        listYes: "Yes",
        listNo: "No",
        listTestButton: "Test",
        listRestartButton: "Restart",
        listEditButton: "Edit",
        listDeleteButton: "Delete",
        listEmpty: "No MCP servers configured.",
        editTitle: "Edit MCP server",
        editNameLabel: "Name",
        editCommandLabel: "Command",
        editArgsLabel: "Args (one per line)",
        editEnvLabel: "Env",
        editEnabledLabel: "Enabled",
        editSaveButtonSaving: "Saving…",
        editSaveButton: "Save Changes",
        editCancelButton: "Cancel",
        deleteConfirm: "Delete this MCP server configuration?",
        statusOk: "OK",
        statusError: "Error",
        statusUnknown: "Unknown",
        statusDisabled: "Disabled",
        statusChecking: "Checking…",
        statusLastChecked: "Last checked: {{timestamp}}",
        statusToolCount: "{{count}} tool(s)",
        commandExample: "Example: npx",
        argsExample:
          "Example:\n-y\n@upstash/context7-mcp\n--transport\nstdio",
      },
      runs: {
        filterTitle: "Filter",
        filterChatIdLabel: "Chat ID",
        filterStatusLabel: "Status",
        filterStatusAll: "All",
        filterStatusPending: "Pending",
        filterStatusRunning: "Running",
        filterStatusCompleted: "Completed",
        filterStatusFailed: "Failed",
        filterStatusCanceled: "Canceled",
        filterSubmitButton: "Load Runs",
        listTitle: "Runs",
        listLoading: "Loading runs…",
        listTableStartedAt: "Started at",
        listTableFinishedAt: "Finished at",
        listTableStatus: "Status",
        listTableTokens: "Tokens",
        listTableError: "Error",
        listNoRuns:
          "No runs loaded yet. Enter a chat ID above.",
        listNoFinished: "-",
        listNoTokens: "-",
        statusValue: {
          pending: "Pending",
          running: "Running",
          completed: "Completed",
          failed: "Failed",
          canceled: "Canceled",
        },
      },
      health: {
        title: "Backend Health",
        checking: "Checking…",
        statusLabel: "Status:",
        statusOk: "OK",
        refreshButton: "Refresh",
      },
    },
  },
  zh: {
    translation: {
      nav: {
        chat: "对话",
        characters: "角色",
        userPersonas: "用户人设",
        presets: "预设",
        lorebooks: "世界书",
        llmConnections: "LLM 连接",
        mcpServers: "MCP 服务器",
        runs: "运行记录",
        settings: "设置",
        health: "健康状态",
      },
      settings: {
        title: "设置",
        themeLabel: "主题（仅 UI）",
        themeDark: "深色",
        themeLight: "浅色（实验性）",
        themeHint:
          "主题仅保存在本地存储中，当前 CSS 主要针对深色模式优化。",
        languageLabel: "语言",
        languageHint:
          "语言偏好保存在本地存储中，只影响界面文案。",
        languageEnglish: "英语",
        languageChinese: "简体中文",
      },
      chat: {
        characterLabel: "角色",
        characterPlaceholder: "选择角色",
        userPersonaLabel: "用户人设",
        userPersonaPlaceholder: "选择人设",
        userPersonaDefaultTag: "默认",
        chatsTitle: "会话",
        chatsNew: "新建",
        chatsLoading: "正在加载会话…",
        noCharacterSelected: "未选择角色",
        messagesLoading: "正在加载消息…",
        composerPlaceholderActive: "输入消息…",
        composerPlaceholderInactive: "选择一个会话开始对话",
        sendButton: "发送",
        sendButtonSending: "正在发送…",
        llmConfigTitle: "LLM 配置",
        llmConnectionLabel: "连接",
        llmConnectionPlaceholder: "选择连接",
        connectionDisabledError: "所选连接已禁用，请选择其他连接。",
        noEnabledConnections: "没有可用的已启用连接。",
        modelLabel: "模型",
        fetchModelsButton: "获取模型列表",
        fetchModelsLoading: "正在获取模型…",
        fetchModelsHint: "可选择建议的模型，也可以继续手动输入自定义模型。",
        temperatureLabel: "温度",
        maxTokensLabel: "最大输出 Token 数",
        maxToolIterationsLabel: "最大工具迭代次数",
        toolCallTimeoutLabel: "工具调用超时（毫秒）",
        saveConfigButton: "保存配置",
        saveConfigButtonSaving: "正在保存…",
        historyEnabledLabel: "包含会话历史",
        historyEnabledOptionOn: "包含历史",
        historyEnabledOptionOff: "不包含历史",
        historyMessageLimitLabel: "保留的历史消息数",
        loreScanTokenLimitLabel: "语料扫描令牌上限",
        loreScanTokenLimitHint:
          "用来扫描关键字的最近对话令牌预算。",
        promptStackTitle: "提示栈预览",
        promptStackSelectCharacter: "选择一个角色查看提示栈。",
        promptStackLoading: "正在加载提示栈…",
        personaTitle: "人设",
        personaEmpty: "未定义人设。",
        stackTitle: "栈",
        stackEmpty:
          "尚未关联提示预设。可通过“角色 → 提示构建器”编辑。",
        createChatPromptTitle: "会话标题",
        createChatPromptDefault: "新会话",
        deleteChatConfirm: "删除此会话？该操作不可撤销。",
        renameChatTitle: "重命名会话",
        renameChatDescription: "更新“{{name}}”的标题。",
        renameChatLabel: "会话标题",
        renameChatButton: "重命名",
        deleteChatButton: "删除会话",
        renameValidation: "标题不能为空。",
        selectChatToConfigure: "选择一个会话进行配置。",
        promptPreviewTitle: "提示预览",
        promptPreviewLoading: "正在加载提示预览…",
        promptPreviewNoChat: "选择一个会话查看提示预览。",
        promptPreviewMessagesLabel: "消息",
        promptPreviewNoMessages: "<暂无提示消息>",
        promptPreviewToolsLabel: "工具",
        promptPreviewNoTools: "<未附加工具>",
      },
      userPersonas: {
        title: "用户人设",
        newTitle: "新建人设",
        nameLabel: "名称",
        descriptionLabel: "描述",
        promptLabel: "提示（可选）",
        isDefaultLabel: "设为默认",
        createButton: "创建",
        createButtonCreating: "正在创建…",
        listTitle: "人设列表",
        listEmpty: "暂无人设。",
        listActions: "操作",
        deleteButton: "删除",
        deleteConfirm: "删除该人设？使用它的会话将无法加载。",
        setDefaultButton: "设为默认",
        defaultTag: "默认",
      },
      common: {
        errorPrefix: "错误：",
        errorLoadingConnections: "加载连接时出错：",
        loadingConfig: "正在加载配置…",
        testing: "正在测试…",
        save: "保存",
        saving: "正在保存…",
        cancel: "取消",
      },
      characters: {
        listNewTitle: "新建角色",
        listNameLabel: "名称",
        listDescriptionLabel: "描述",
        listAvatarPathLabel: "头像路径",
        listPersonaLabel: "人设",
        listCreatorNotesLabel: "创作者备注",
        listCreateButtonCreating: "正在创建…",
        listCreateButton: "创建角色",
        listTitle: "角色",
        listLoading: "正在加载角色…",
        listTableActions: "操作",
        listEmpty: "还没有角色。在上方创建一个。",
        listEditButton: "编辑",
        listDeleteButton: "删除",
        listDeleteConfirm: "删除此角色？该操作不可撤销。",
        detailMissingId: "缺少角色 ID。",
        detailTabsOverview: "概览",
        detailTabsPersona: "人设",
        detailTabsPromptBuilder: "提示构建器",
        detailLoading: "正在加载角色…",
        detailOverviewTitle: "概览",
        detailOverviewSaveButtonSaving: "正在保存…",
        detailOverviewSaveButton: "保存",
        detailPersonaTitle: "人设",
        detailPersonaLabel: "人设",
        detailPersonaSaveButtonSaving: "正在保存…",
        detailPersonaSaveButton: "保存人设",
      },
      lorebooks: {
        listNewTitle: "新建世界书",
        listNameLabel: "名称",
        listDescriptionLabel: "描述",
        listScopeLabel: "范围",
        listScopeLocal: "本地",
        listScopeGlobal: "全局",
        listScopeHint:
          "“全局”只是用于筛选的标签，不会改变行为。",
        listCreateButtonCreating: "正在创建…",
        listCreateButton: "创建世界书",
        listTitle: "世界书",
        listFilterAll: "全部",
        listFilterGlobal: "全局",
        listFilterLocal: "本地",
        listFilterSearchLabel: "搜索世界书",
        listFilterSearchPlaceholder: "按名称搜索…",
        listLoading: "正在加载世界书…",
        listTableName: "名称",
        listTableDescription: "描述",
        listTableGlobal: "全局",
        listTableActions: "操作",
        listYes: "是",
        listNo: "否",
        listOpenButton: "打开",
        listDeleteButton: "删除",
        listEmpty: "还没有世界书。在上方创建一个。",
        listDeleteConfirm: "删除此世界书及其所有条目？",
        detailMissingId: "缺少世界书 ID。",
        detailTitle: "世界书",
        detailLoadingLorebook: "正在加载世界书…",
        detailNameLabel: "名称",
        detailDescriptionLabel: "描述",
        detailScopeLabel: "范围",
        detailScopeLocal: "本地",
        detailScopeGlobal: "全局",
        detailScopeHint:
          "“全局”只是用于筛选的标签，不会改变行为。",
        detailSaveButtonSaving: "正在保存…",
        detailSaveButton: "保存世界书",
        newEntryTitle: "新建条目",
        newEntryKeywordsLabel: "关键字（逗号分隔）",
        newEntryKeywordsPlaceholder:
          "例如：飞船，曲速核心，星舰",
        newEntryKeywordsHint:
          "当匹配到任意关键字时会触发。",
        newEntryContentLabel: "内容",
        newEntryActiveLabel: "启用",
        newEntryActiveHint: "只有启用的条目会被使用。",
        newEntryCreateButtonCreating: "正在创建…",
        newEntryCreateButton: "添加条目",
        entriesTitle: "条目",
        entriesLoading: "正在加载条目…",
        entriesTableKeywords: "关键字",
        entriesTableContent: "内容",
        entriesTableOrder: "顺序",
        entriesTableActive: "启用",
        entriesTableActions: "操作",
        entriesMoveUpTitle: "上移",
        entriesMoveDownTitle: "下移",
        entriesEmpty: "还没有条目。在上方添加一个。",
        entriesEditButton: "编辑",
        entriesDeleteButton: "删除",
        editEntryTitle: "编辑条目",
        editEntryKeywordsLabel: "关键字（逗号分隔）",
        editEntryContentLabel: "内容",
        editEntryEnabledLabel: "启用",
        editEntrySaveButtonSaving: "正在保存…",
        editEntrySaveButton: "保存条目",
        editEntryCancelButton: "取消",
        entriesDeleteConfirm: "删除此条目？",
      },
      presets: {
        filtersTitle: "筛选",
        filtersKindLabel: "类型",
        filtersKindAll: "全部",
        filtersKindStaticText: "静态文本",
        filtersKindLorebook: "世界书",
        filtersKindHistory: "历史",
        filtersKindMcpTools: "MCP 工具",
        filtersBuiltInLabel: "内置",
        filtersBuiltInAll: "全部",
        filtersBuiltInTrue: "仅内置",
        filtersBuiltInFalse: "仅用户自定义",
        filtersTitleContainsLabel: "标题包含",
        newTitle: "新建预设",
        newFormTitleLabel: "标题",
        newFormKindLabel: "类型",
        newFormDescriptionLabel: "描述",
        newFormContentLabel: "内容",
        newCreateButtonCreating: "正在创建…",
        newCreateButton: "创建预设",
        listTitle: "预设",
        listLoading: "正在加载预设…",
        listTableTitle: "标题",
        listTableKind: "类型",
        listTableDescription: "描述",
        listTableBuiltIn: "内置",
        listTableActions: "操作",
        listBuiltInYes: "是",
        listBuiltInNo: "否",
        listEditButton: "编辑",
        listDeleteButton: "删除",
        listEmpty: "没有符合筛选条件的预设。",
        editTitle: "编辑预设",
        editFormTitleLabel: "标题",
        editFormDescriptionLabel: "描述",
        editFormContentLabel: "内容",
        editSaveButtonSaving: "正在保存…",
        editSaveButton: "保存更改",
        editCancelButton: "取消",
        deleteConfirm: "删除此预设？它可能被提示栈引用。",
      },
      promptBuilder: {
        quickPersonaTitle: "快速人设编辑",
        quickPersonaLabel: "人设",
        quickPersonaSaveButtonSaving: "正在保存…",
        quickPersonaSaveButton: "保存人设",
        paletteTitle: "预设面板",
        paletteLoading: "正在加载预设…",
        paletteEmpty:
          "还没有预设。请在“预设”页面创建。",
        paletteAddBadge: "添加",
        paletteSectionStaticBlocks: "静态块",
        paletteSectionLorebooks: "世界书",
        paletteSectionHistory: "历史",
        paletteSectionMcpTools: "MCP 工具集",
        kindLabelStaticText: "静态文本",
        kindLabelLorebook: "世界书",
        kindLabelHistory: "历史",
        kindLabelMcpTools: "MCP 工具",
        stackTitle: "当前栈",
        stackRoleFilterAll: "所有角色",
        stackRoleFilterSystem: "系统",
        stackRoleFilterAssistant: "助手",
        stackRoleFilterUser: "用户",
        stackAttachRoleLabel: "添加到",
        stackReordering: "正在重新排序…",
        stackLoading: "正在加载栈…",
        stackEmpty:
          "栈中还没有预设。在左侧点击预设以添加。",
        stackRemoveButton: "移除",
        previewTitle: "提示预览",
        previewSystemPersonaLabel: "系统 / 人设：",
        previewStackLabel: "栈：",
        previewEmptyPersona: "<空的人设>",
        previewNoPresets: "<没有附加预设>",
        lorebooksAttachedTitle: "已附加的世界书",
        lorebooksAttachedEmpty: "尚未附加世界书。",
        mcpAttachedTitle: "已附加的 MCP 服务器",
        mcpAttachedEmpty: "尚未附加任何 MCP 服务器。",
      },
      llmConnections: {
        newTitle: "新建连接",
        newNameLabel: "名称",
        newBaseUrlLabel: "基础 URL",
        newDefaultModelLabel: "默认模型",
        newApiKeyLabel: "API 密钥",
        newEnabledLabel: "启用",
        newCreateButtonCreating: "正在创建…",
        newCreateButton: "创建连接",
        listTitle: "连接",
        listLoading: "正在加载连接…",
        listTableName: "名称",
        listTableProvider: "提供方",
        listTableBaseUrl: "基础 URL",
        listTableDefaultModel: "默认模型",
        listTableEnabled: "启用",
        listTableStatus: "状态",
        listTableActions: "操作",
        listYes: "是",
        listNo: "否",
        testButton: "测试",
        testDraftButton: "测试连接",
        statusUnknown: "未知",
        statusOk: "正常",
        statusFailing: "失败",
        statusError: "错误",
        statusLastTested: "上次测试：{{timestamp}}",
        statusNotTested: "尚未测试",
        testResultOk: "连接正常。可用模型：{{count}}",
        testResultFail: "连接失败：{{message}}",
        listEditButton: "编辑",
        listDeleteButton: "删除",
        listEmpty: "尚未配置任何 LLM 连接。",
        editTitle: "编辑连接",
        editNameLabel: "名称",
        editBaseUrlLabel: "基础 URL",
        editDefaultModelLabel: "默认模型",
        editEnabledLabel: "启用",
        editSaveButtonSaving: "正在保存…",
        editSaveButton: "保存更改",
        editCancelButton: "取消",
        deleteConfirm:
          "删除此 LLM 连接？使用它的会话可能失败。",
      },
      mcpServers: {
        newTitle: "新建 MCP 服务器",
        newNameLabel: "名称",
        newCommandLabel: "命令",
        newArgsLabel: "参数（每行一个）",
        newEnvLabel: "环境变量（KEY=VALUE，逗号分隔）",
        newEnabledLabel: "启用",
        newCreateButtonCreating: "正在创建…",
        newCreateButton: "创建 MCP 服务器",
        listTitle: "MCP 服务器",
        listLoading: "正在加载 MCP 服务器…",
        listTableName: "名称",
        listTableCommand: "命令",
        listTableArgs: "参数",
        listTableStatus: "状态",
        listTableEnabled: "启用",
        listTableActions: "操作",
        listYes: "是",
        listNo: "否",
        listTestButton: "测试",
        listRestartButton: "重启并测试",
        listEditButton: "编辑",
        listDeleteButton: "删除",
        listEmpty: "尚未配置任何 MCP 服务器。",
        editTitle: "编辑 MCP 服务器",
        editNameLabel: "名称",
        editCommandLabel: "命令",
        editArgsLabel: "参数（每行一个）",
        editEnvLabel: "环境变量",
        editEnabledLabel: "启用",
        editSaveButtonSaving: "正在保存…",
        editSaveButton: "保存更改",
        editCancelButton: "取消",
        deleteConfirm: "删除此 MCP 服务器配置？",
        statusOk: "正常",
        statusError: "错误",
        statusUnknown: "未知",
        statusDisabled: "已禁用",
        statusChecking: "正在检查…",
        statusLastChecked: "上次检查: {{timestamp}}",
        statusToolCount: "{{count}} 个工具",
        commandExample: "示例：npx",
        argsExample:
          "示例：\n-y\n@upstash/context7-mcp\n--transport\nstdio",
      },
      runs: {
        filterTitle: "筛选",
        filterChatIdLabel: "会话 ID",
        filterStatusLabel: "状态",
        filterStatusAll: "全部",
        filterStatusPending: "等待中",
        filterStatusRunning: "运行中",
        filterStatusCompleted: "已完成",
        filterStatusFailed: "失败",
        filterStatusCanceled: "已取消",
        filterSubmitButton: "加载运行记录",
        listTitle: "运行记录",
        listLoading: "正在加载运行记录…",
        listTableStartedAt: "开始时间",
        listTableFinishedAt: "结束时间",
        listTableStatus: "状态",
        listTableTokens: "Tokens",
        listTableError: "错误",
        listNoRuns:
          "尚未加载运行记录。请在上方输入会话 ID。",
        listNoFinished: "-",
        listNoTokens: "-",
        statusValue: {
          pending: "等待中",
          running: "运行中",
          completed: "已完成",
          failed: "失败",
          canceled: "已取消",
        },
      },
      health: {
        title: "后端健康状态",
        checking: "正在检查…",
        statusLabel: "状态：",
        statusOk: "正常",
        refreshButton: "刷新",
      },
    },
  },
} as const;

void i18n.use(initReactI18next).init({
  resources,
  lng: detectInitialLanguage(),
  fallbackLng: "en",
  interpolation: {
    escapeValue: false,
  },
});

export default i18n;
